---
title: "@microviz/renderers"
slug: renderers
---

Framework-agnostic renderers for converting a `RenderModel` into SVG/Canvas output.

## Install

```bash
pnpm add @microviz/renderers
```

## Render to SVG (string)

Useful for SSR, email, snapshots, and anywhere you want plain markup.

```ts
import { computeModel } from "@microviz/core";
import { renderSvgString } from "@microviz/renderers";

const model = computeModel({
  data: [6, 10, 7, 12, 9, 14],
  size: { width: 200, height: 32 },
  spec: { type: "sparkline" },
});

const svg = renderSvgString(model);
```

## Render to Canvas

Canvas supports `CanvasRenderingContext2D` and `OffscreenCanvasRenderingContext2D`.

```ts
import { renderCanvas } from "@microviz/renderers";

renderCanvas(ctx, model, {
  fillStyle: "#2563eb",
  strokeStyle: "#2563eb",
  strokeWidth: 2.2,
});
```

## Render to HTML (experimental)

Useful for CSS-first effects or embedding inside non-SVG layouts. This renderer is parity-deferred.

```ts
import { renderHtmlString } from "@microviz/renderers";

const html = renderHtmlString(model);
```

HTML renderer limitations:
- Supports `rect`, `circle`, `line`, and `text` marks only; `path` marks are ignored.
- Supports `linearGradient`, `pattern`, `mask`, `clipRect`, and `filter` defs (dropShadow/gaussianBlur only).
- Other defs/effects are ignored; use SVG/Canvas for full fidelity.

To detect unsupported HTML features:

```ts
import {
  getHtmlUnsupportedDefTypes,
  getHtmlUnsupportedMarkEffects,
  getHtmlUnsupportedMarkTypes,
} from "@microviz/renderers";

const unsupportedMarks = getHtmlUnsupportedMarkTypes(model);
const unsupportedDefs = getHtmlUnsupportedDefTypes(model);
const unsupportedEffects = getHtmlUnsupportedMarkEffects(model);
```

## Export utilities

Small helpers for turning render output into sharable artifacts.

```ts
import {
  canvasToBlob,
  renderSvgString,
  svgStringToBlob,
  svgStringToDataUrl,
} from "@microviz/renderers";

const svg = renderSvgString(model);
const svgBlob = svgStringToBlob(svg);
const svgDataUrl = svgStringToDataUrl(svg);

// Works with either HTMLCanvasElement or OffscreenCanvas.
const pngBlob = await canvasToBlob(canvas, { type: "image/png" });
```

## Capability notes

`@microviz/renderers` supports the core mark types (`rect`, `path`, `text`, `circle`, `line`) and common defs (`linearGradient`, `clipRect`, `pattern`, `mask`, `filter`).

SVG filters:
- SVG renderers support `dropShadow`, `gaussianBlur`, `turbulence`, and `displacementMap`.
- Canvas supports `dropShadow` and `gaussianBlur`.
- Canvas also supports `turbulence` + `displacementMap` when `OffscreenCanvas` ImageData APIs are available (otherwise those primitives are ignored).
  - This is a targeted approximation of the common `turbulence â†’ displacementMap` pipeline (seeded/deterministic), not a full SVG filter implementation.

To check runtime support for the Canvas approximation:

```ts
import { canRenderCanvasNoiseDisplacement } from "@microviz/renderers";

if (!canRenderCanvasNoiseDisplacement()) {
  // e.g. fall back to SVG string rendering for parity
}
```

To detect filter primitives that Canvas will ignore:

```ts
import { getCanvasUnsupportedFilterPrimitiveTypes } from "@microviz/renderers";

const unsupported = getCanvasUnsupportedFilterPrimitiveTypes(model);
if (unsupported.length > 0) {
  // e.g. ["displacementMap", "turbulence"] (environments without OffscreenCanvas)
}
```
