---
title: "@microviz/elements"
slug: elements
---

Web Components (custom elements) for micro-visualizations.

This package is the framework-agnostic consumption surface.

## Install

```bash
pnpm add @microviz/elements @microviz/themes
```

## Usage

Import the base theme CSS (optional but recommended), then import elements to register all tags:

```ts
import "@microviz/themes/base.css";
import "@microviz/elements";
```

Then use any chart element directly:

```html
<microviz-sparkline data="[6,10,7,12,9,14]" width="200" height="32"></microviz-sparkline>
```

## Generic chart element (recommended for responsive layouts)

`<microviz-chart>` accepts JSON `spec` + `data` and can auto-size using `ResizeObserver`:

```html
<microviz-chart
  autosize
  style="width: 240px; height: 64px"
  spec='{"type":"sparkline"}'
  data="[6,10,7,12,9,14]"
></microviz-chart>
```

## Interaction events (tooltip primitives)

`<microviz-model>` and `<microviz-chart>` can emit high-level hit-test events when `interactive` is present:

```ts
import type { MicrovizHitEvent } from "@microviz/elements";

const el = document.querySelector("microviz-chart");
el?.addEventListener("microviz-hit", (event) => {
  const detail = (event as MicrovizHitEvent).detail;

  // `detail.hit` is null when not hovering a mark.
  console.log(detail.hit?.markId);
});
```

`detail.client` is in viewport pixels (`event.clientX/Y`); `detail.point` (when present) is in model coordinates (`0..width`, `0..height`).

To tighten or loosen stroke hit targets, set `hit-slop` (in pixels):

```html
<microviz-chart
  autosize
  interactive
  hit-slop="0"
  style="width: 240px; height: 64px"
  spec='{"type":"sparkline"}'
  data="[6,10,7,12,9,14]"
></microviz-chart>
```

## Skeleton mode (empty/loading state)

If `skeleton` is present, `<microviz-model>` and `<microviz-chart>` will render a small SVG skeleton when the model reports `EMPTY_DATA` or `BLANK_RENDER` warnings:

```html
<microviz-chart
  autosize
  skeleton
  style="width: 240px; height: 64px"
  spec='{"type":"sparkline"}'
  data="[]"
></microviz-chart>
```

## Legend primitive

`<microviz-legend>` renders a small, CSS-token-driven legend from JSON items:

```html
<microviz-legend
  items='[
    { "label": "Series A", "series": 1 },
    { "label": "Series B", "series": 2 },
    { "label": "Custom", "color": "#2563eb" }
  ]'
></microviz-legend>
```

If you already have a `RenderModel` (e.g. from `computeModel`), you can mount it via `.model`:

```ts
import { computeModel } from "@microviz/core";

const el = document.querySelector("microviz-model");
el.model = computeModel({
  data: [1, 2, 3],
  size: { width: 200, height: 32 },
  spec: { type: "sparkline" },
});
```

## Tag names

For every `spec.type` registered in `@microviz/core`, there is a corresponding element:

- Chart type `"sparkline"` → `<microviz-sparkline>`
- Chart type `"pixel-treemap"` → `<microviz-pixel-treemap>`

To list all available tags programmatically:

```ts
import { getAllChartMeta } from "@microviz/core";

const tags = getAllChartMeta().map((meta) => `microviz-${meta.type}`);
```
